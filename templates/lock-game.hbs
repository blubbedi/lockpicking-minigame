<div class="lp-game-root">

  <h2 class="lp-title">Schlossknacken</h2>

  <div class="lp-meta">
    <div><b>{{actorName}}</b> versucht ein Schloss zu knacken.</div>

    <div class="lp-tags-row">
      <span class="lp-tag lp-tag--dc">DC: {{dc}}</span>
      <span class="lp-tag lp-tag--bonus">Bonus: {{bonus}}</span>

      {{!-- Reliable Talent anzeigen, wenn aktiv --}}
      {{#if reliableTalent}}
        <span class="lp-tag lp-tag--reliable">Verlässliches Talent</span>
      {{/if}}

      {{#if disadvantage}}
        <span class="lp-tag lp-tag--bad">mit Nachteil</span>
      {{else}}
        <span class="lp-tag lp-tag--good">ohne Nachteil</span>
      {{/if}}
    </div>

    {{!-- NEU: Bonus-Zusammensetzung (DEX + Übung/Expertise) --}}
    {{#if bonusBreakdown}}
      <p class="lp-expl">
        Bonus-Zusammensetzung:
        DEX {{numberFormat bonusBreakdown.dexMod sign=true}}
        {{#if bonusBreakdown.profPart}}
          + {{bonusBreakdown.profLabel}} {{numberFormat bonusBreakdown.profPart sign=true}}
        {{/if}}
        = <b>{{numberFormat bonusBreakdown.totalBonus sign=true}}</b>
      </p>
    {{/if}}

    {{!-- NEU: Erklärung Übungsbonus / Reliable Talent / Fehlversuche --}}
    {{#if reliableInfo}}
      <p class="lp-expl">
        Übungsbonus für Diebeswerkzeug ({{bonusBreakdown.profLabel}}):
        <b>{{reliableInfo.trainingBonus}}</b>.
        {{#if reliableInfo.hasReliable}}
          Mit <b>Verlässliches Talent</b> entspricht das
          <b>{{reliableInfo.allowedMistakes}}</b> erlaubten Fehlversuchen
          (Übungsbonus / 2).
        {{else}}
          Ohne Verlässliches Talent ergeben sich aus dem Übungsbonus
          keine zusätzlichen Fehlversuche (0).
        {{/if}}
      </p>
    {{/if}}

    <p class="lp-expl">
      Drücke nacheinander die angezeigten Pfeiltasten, bevor der Zeitbalken leer ist.
      Geschaffte Schritte werden oben grün markiert.
    </p>
  </div>

  <!-- Fortschritt / Timer -->
  <div class="lp-section">
    <div class="lp-section-label">Fortschritt:</div>
    <div class="lp-timer-bar">
      <div class="lp-timer-fill"></div>
      <div class="lp-timer-text">0.0s</div>
    </div>
    <div class="lp-mistakes-info"></div>
  </div>

  <!-- Gesamte Sequenz -->
  <div class="lp-section">
    <div class="lp-section-label">Gesamtsequenz:</div>
    <div class="lp-sequence-steps"></div>
  </div>

  <!-- Aktuelle Taste (Step-Feld) -->
  <div class="lp-current-key-box">
    <div class="lp-current-key-icon">
      <div class="lp-current-key-icon-inner" data-key=""></div>
    </div>
    <div class="lp-current-key-label">Aktuelle Taste</div>
  </div>

  <!-- Status & Buttons -->
  <div class="lp-status-text">Bereit – klicke »Start«.</div>

  <div class="lp-buttons">
    <button class="lp-btn lp-btn--primary" data-action="start-game">Start</button>
    <button class="lp-btn" data-action="cancel-game">Abbrechen</button>
  </div>

</div>
